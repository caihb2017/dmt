#### 7.12-7.18  C++网课笔记

总结：

学习了C++当中的基本概念和语法：类的创建和实例化对象，对象成员访问权限设置和应用，对象的初始化和清理。继承的方式和基本语法。

##### 程序的内存模型

*<u>代码区</u>*  存放二进制代码

*<u>全局区</u>*  存放全局变量，静态变量，常量 在程序结束时回收，因此上述作用时间持续到程序结束

*<u>栈区</u>* 存放局部变量和函数参数等 由编译器自动回收

*<u>堆区</u>* 存放用户开辟的空间，由用户自己释放，或者程序结束由操作系统释放。



#### 引用

+ 引用是让两个变量指向同一个内存区域以操纵这片内存区域的方法，引用也可以视为为变量取别名。

+ 本质上引用是指向一片区域的静态指针（不可更改地址，可以通过指针操作该片区域）

+ int &b=a；

注意：1.引用必须初始化。2.引用一旦初始化后就不能更改



##### 引用的应用：

​	1.引用作为函数参数，形参修饰实参，达到类似地址传递的效果

​	举例：void myswap(int &a,int &b)

​	2.引用作为函数的返回

​	return一个静态变量或者全局变量（不能返回局部变量），返回一个引用。

`int &test01{`

​	`static int a=10;`

​	`return a;`

`}`

<u>*这种方法可以用来在函数外修改静态变量。*</u>

​	3.常量引用

const int &a=b；const int&c=10；

const意味着只读，a的值不能被修改；

这种方法实际上由系统生成一个局部变量，然后让引用指向这个局部变量。

**问题：引用变量的存在时间为多少？用引用作为函数参数，这个引用在函数调用结束后被清除吗**



##### 函数重载

相同作用域（例如全局域），拥有同样变量名但参数不同，称为函数重载，通过这种方式可以提高函数的复用性。




***

### 类和对象

#### 类和对象特性其一：封装

##### 类的创建

class创建的类默认为私有，struct创建的默认为公共。

```c++
class Circle{
    public:
	int m_r;
	double calculateZC(){
		return 2* PI * m_r;
	}
}
```

通过类创建具体对象的过程称为实例化。

实例化对象后应该对其类属性进行赋值。既可以直接对属性进行赋值，也可以通过成员函数进行赋值。



###### 静态成员变量和静态成员函数

+ 被该类的所有对象共有，既可以通过对象访问，也可以通过类进行访问，用`：：`
+ 静态成员变量储存在全局区，在编译时就开辟了内存空间
+ 静态成员变量在类外进行初始化操作

+ 静态成员函数也同样被所有对象共有，只能访问静态变量



##### 访问权限

public：类内外都可以访问

protected：类内可以，继承子类可以访问

private：类内可以，其他不可以

访问权限控制成员变量和成员函数能否被访问。成员变量一定能够被该类的成员函数访问。

<u>*问题：类内和类外的区别*</u>



###### 应用举例一：对权限为private 的成员变量进行读写

将成员变量都设置为private，再通过公共的成员函数对这些成员变量进行读/写操作

例如

```C++
class person{

string m_name;

int m_age;

public:
	void setName(string _name){

		m_name=_name;

		return;

	}

	void setAge(int age){

		if(age<0||age>100){

					cout<<"输入年龄有误，赋值失败"<<endl;

					return;

		}

		m_age=age;

	}

}
```

###### 应用举例二：全局函数和成员函数的对比

类的成员函数可以直接访问成员变量，而全局函数，可能需要成员函数来间接地访问成员变量，相对不方便。

一个类实例的成员函数访问其他实例的成员变量也需要间接地访问。

```c++
class cube{

	int m_length;

	int m_width;

	int m_hight;

	bool isSame(cube &c){//函数参数为引用，在参数很大时（例如参数为一个对象时），可以更加简便

	if(m_length==c.getlength()&&m_width==c.getwidth()&&m_hight==c.gethight()){

		return true;

	}	

	return false;

	}
}
```



#### 对象

##### 对象的初始化和清理

+ 构造函数和析构函数分别在创建对象的时候和销毁对象（例如局部对象在函数调用后销毁）的时候自动调用

+ 构造函数和类同名（因此在创建对象时自动引用），可以有参数，没有返回值；析构函数需要在类名前加~
+ 构造函数和析构都定义在类当中，作为成员函数

​	构造函数的类型：1.有参/无参 2. 普通构造函数/拷贝构造函数。拷贝构造函数传入参数为const T&，创建一个和该对象属性相同的新对象。

​	构造函数创建对象的几种方式（例子中通过拷贝构造函数创建一个新的对象p1）：

+ 括号法 `person p1(p2);`

+ 显示传递 `person p1=person(p2);`

+ 隐式传递 `person p1=p2`  

  

  当一个函数返回值是类，返回这个类的时候，调用了拷贝构造函数存储返回值。当返回是引用时，则返回一个return对象的别名（或者说指向return的对象的静态指针）

  

  ##### this的使用：

  this指针指向被调用成员函数所属的对象，`this->`可以访问该对象的成员变量,*this 表示该对象本身。
  
  例如return *this，函数返回一个引用
  
  



#### 类和对象特性其二：继承

继承 的语法示例： class 子类 ：继承方式 父类{子类特性}



##### 继承方式

子类只能继承父类的公共和保护的变量或函数，私有的不可继承

![image-20240718122443842](C:\Users\17620\AppData\Roaming\Typora\typora-user-images\image-20240718122443842.png)

+ 公共继承 子类继承后，父类的成员的访问权限不变
+ 保护继承 继承的父类成员访问权限变为保护
+ 私有继承 继承的父类成员访问权限变为私有
